<style>
.lx-highlight { position: relative; border-radius:3px; padding:1px 2px;}
.lx-highlight .lx-tooltip {
  visibility: hidden;
  opacity: 0;
  transition: opacity 0.2s ease-in-out;
  background: #333;
  color: #fff;
  text-align: left;
  border-radius: 4px;
  padding: 6px 8px;
  position: absolute;
  z-index: 1000;
  bottom: 125%;
  left: 50%;
  transform: translateX(-50%);
  font-size: 12px;
  max-width: 240px;
  white-space: normal;
  box-shadow: 0 2px 6px rgba(0,0,0,0.3);
}
.lx-highlight:hover .lx-tooltip { visibility: visible; opacity:1; }
.lx-animated-wrapper { max-width: 100%; font-family: Arial, sans-serif; }
.lx-controls {
  background: #fafafa; border: 1px solid #90caf9; border-radius: 8px;
  padding: 12px; margin-bottom: 16px;
}
.lx-button-row {
  display: flex; justify-content: center; gap: 8px; margin-bottom: 12px;
}
.lx-control-btn {
  background: #4285f4; color: white; border: none; border-radius: 4px;
  padding: 8px 16px; cursor: pointer; font-size: 13px; font-weight: 500;
  transition: background-color 0.2s;
}
.lx-control-btn:hover { background: #3367d6; }
.lx-progress-container {
  margin-bottom: 8px;
}
.lx-progress-slider {
  width: 100%; margin: 0; appearance: none; height: 6px;
  background: #ddd; border-radius: 3px; outline: none;
}
.lx-progress-slider::-webkit-slider-thumb {
  appearance: none; width: 18px; height: 18px; background: #4285f4;
  border-radius: 50%; cursor: pointer;
}
.lx-progress-slider::-moz-range-thumb {
  width: 18px; height: 18px; background: #4285f4; border-radius: 50%;
  cursor: pointer; border: none;
}
.lx-status-text {
  text-align: center; font-size: 12px; color: #666; margin-top: 4px;
}
.lx-text-window {
  font-family: monospace; white-space: pre-wrap; border: 1px solid #90caf9;
  padding: 12px; max-height: 260px; overflow-y: auto; margin-bottom: 12px;
  line-height: 1.6;
}
.lx-attributes-panel {
  background: #fafafa; border: 1px solid #90caf9; border-radius: 6px;
  padding: 8px 10px; margin-top: 8px; font-size: 13px;
}
.lx-current-highlight {
  border-bottom: 4px solid #ff4444;
  font-weight: bold;
  animation: lx-pulse 1s ease-in-out;
}
@keyframes lx-pulse {
  0% { text-decoration-color: #ff4444; }
  50% { text-decoration-color: #ff0000; }
  100% { text-decoration-color: #ff4444; }
}
.lx-legend {
  font-size: 12px; margin-bottom: 8px;
  padding-bottom: 8px; border-bottom: 1px solid #e0e0e0;
}
.lx-label {
  display: inline-block;
  padding: 2px 4px;
  border-radius: 3px;
  margin-right: 4px;
  color: #000;
}
.lx-attr-key {
  font-weight: 600;
  color: #1565c0;
  letter-spacing: 0.3px;
}
.lx-attr-value {
  font-weight: 400;
  opacity: 0.85;
  letter-spacing: 0.2px;
}

/* Add optimizations with larger fonts and better readability for GIFs */
.lx-gif-optimized .lx-text-window { font-size: 16px; line-height: 1.8; }
.lx-gif-optimized .lx-attributes-panel { font-size: 15px; }
.lx-gif-optimized .lx-current-highlight { text-decoration-thickness: 4px; }
</style>
    <div class="lx-animated-wrapper lx-gif-optimized">
      <div class="lx-attributes-panel">
        <div class="lx-legend">Highlights Legend: <span class="lx-label" style="background-color:#D2E3FC;">lecture_segment</span></div>
        <div id="attributesContainer"></div>
      </div>
      <div class="lx-text-window" id="textWindow">
        # LECTURE ANALYSIS: Data Sets
## Video Segment: 110:40 - 114:53

### Sub-topic: Data Sets Overview
Key Terms: Structured data, Unstructured data
<span class="lx-highlight lx-current-highlight" data-idx="0" style="background-color:#D2E3FC;">Explanation: The lecture begins by defining data sets as a collection of data organized in certain formats. It then distinguishes between two main types: structured data, which is often in a clear, predictable structure like rows and columns, and unstructured data, which is more complex and varied, typically derived from human-generated content such as text, images, and videos. The speaker emphasizes that while operations can be performed on data, the value comes from operations that yield meaningful results reflecting real-world situations.
Examples: Structured data: Often in rows and columns | Unstructured data: e.g., text, images, videos</span>

### Sub-topic: Structured vs. Unstructured Data
Key Terms: Structured data, Unstructured data, Human-generated content
<span class="lx-highlight" data-idx="1" style="background-color:#D2E3FC;">Explanation: The speaker elaborates on structured data, stating that it has a clear meaning for rows and columns. Unstructured data, on the other hand, is more varied and can be difficult to interpret directly. Examples of unstructured data include text, images, and videos. The lecture notes that with advancements in AI, unstructured data like images and videos can now be converted into a structured format, although understanding how to interpret them remains crucial.
Examples: Structured data: You know exactly the meaning about the row and column. | Unstructured data: Human-generated content such as image, text, video.</span>

### Sub-topic: Characteristics of Data Sets
Key Terms: Dimensionality, Sparsity, Resolution
<span class="lx-highlight" data-idx="2" style="background-color:#D2E3FC;">Explanation: The lecture introduces three key characteristics of data sets: Dimensionality (referring to the &#x27;Curse of Dimensionality&#x27;), Sparsity (related to &#x27;Only presence counts&#x27;), and Resolution (patterns depend on the scale).</span> <span class="lx-highlight" data-idx="3" style="background-color:#D2E3FC;">Sparsity is further explained as originating from the keyword &#x27;sparse,&#x27; meaning that in large datasets, like those from e-commerce stores with millions of records, only a small fraction of the data might be relevant or actively used (e.g., a customer buying only a few books out of millions available). This makes the data sparse.
Examples: Dimensionality: Curse of Dimensionality | Sparsity: Only presence counts | Resolution: Patterns depend on the scale</span>

<span class="lx-highlight" data-idx="4" style="background-color:#D2E3FC;">### Sub-topic: Types of Data Sets
Key Terms: Data Matrix, Document Data, Transaction Data
Explanation: The presentation then discusses different types of data sets. A Data Matrix is formed when each object has the same fixed set of numeric attributes, allowing for ratio operations. Document Data typically consists of unstructured and textual information, where each term is a component of a vector, and its value represents the number of times the term appears in the document. This is often converted into a vector form, creating &#x27;term vectors&#x27; or &#x27;document vectors.&#x27; Transaction Data is another type mentioned.
Examples: Data Matrix: Example table with &#x27;Book&#x27;, &#x27;Price&#x27;, &#x27;Sells&#x27;, &#x27;# Reviews&#x27;, &#x27;# Readers&#x27;. | Document Data: Example table showing word counts for &#x27;learn&#x27;, &#x27;teach&#x27;, &#x27;score&#x27;, &#x27;game&#x27;, &#x27;score&#x27;, &#x27;teach&#x27;, &#x27;teach&#x27; across &#x27;Document 1&#x27;, &#x27;Document 2&#x27;, &#x27;Document 3&#x27;.</span>

<span class="lx-highlight" data-idx="5" style="background-color:#D2E3FC;">### Sub-topic: Data Matrix and Document Data
Key Terms: Data Matrix, Document Data, Vector, Term Vector
Explanation: The lecture details Data Matrices, emphasizing that all values inside need to become ratio data for operations. Document Data is described as unstructured and textual, where each term is a component of a vector, and its value is the count of that term in the document. This process generates &#x27;term vectors&#x27; or &#x27;document vectors,&#x27; which are essential for computers to process text data efficiently. The speaker notes that before 2013, this vector conversion was a primary method for handling document data.</span>
<span class="lx-highlight" data-idx="6" style="background-color:#D2E3FC;">Examples: Data Matrix: If all values inside need to become the ratio data. | Document Data: Each term can be converted as a term vector. The value of each component is the number of times the corresponding term in the document.</span>

      </div>
      <div class="lx-controls">
        <div class="lx-button-row">
          <button class="lx-control-btn" onclick="playPause()">▶️ Play</button>
          <button class="lx-control-btn" onclick="prevExtraction()">⏮ Previous</button>
          <button class="lx-control-btn" onclick="nextExtraction()">⏭ Next</button>
        </div>
        <div class="lx-progress-container">
          <input type="range" id="progressSlider" class="lx-progress-slider"
                 min="0" max="6" value="0"
                 onchange="jumpToExtraction(this.value)">
        </div>
        <div class="lx-status-text">
          Entity <span id="entityInfo">1/7</span> |
          Pos <span id="posInfo">[145-793]</span>
        </div>
      </div>
    </div>

    <script>
      (function() {
        const extractions = [{"index": 0, "class": "lecture_segment", "text": "Explanation: The lecture begins by defining data sets as a collection of data organized in certain formats. It then distinguishes between two main types: structured data, which is often in a clear, predictable structure like rows and columns, and unstructured data, which is more complex and varied, typically derived from human-generated content such as text, images, and videos. The speaker emphasizes that while operations can be performed on data, the value comes from operations that yield meaningful results reflecting real-world situations.\nExamples: Structured data: Often in rows and columns | Unstructured data: e.g., text, images, videos", "color": "#D2E3FC", "startPos": 145, "endPos": 793, "beforeText": "# LECTURE ANALYSIS: Data Sets\n## Video Segment: 110:40 - 114:53\n\n### Sub-topic: Data Sets Overview\nKey Terms: Structured data, Unstructured data\n", "extractionText": "Explanation: The lecture begins by defining data sets as a collection of data organized in certain formats. It then distinguishes between two main types: structured data, which is often in a clear, predictable structure like rows and columns, and unstructured data, which is more complex and varied, typically derived from human-generated content such as text, images, and videos. The speaker emphasizes that while operations can be performed on data, the value comes from operations that yield meaningful results reflecting real-world situations.\nExamples: Structured data: Often in rows and columns | Unstructured data: e.g., text, images, videos", "afterText": "\n\n### Sub-topic: Structured vs. Unstructured Data\nKey Terms: Structured data, Unstructured data, Human-generated content\nExplanation: The speaker elab", "attributesHtml": "<div><strong>class:</strong> lecture_segment</div><div><strong>attributes:</strong> {<span class=\"lx-attr-key\">sub_topic</span>: <span class=\"lx-attr-value\">Data Sets Overview</span>, <span class=\"lx-attr-key\">key_terms</span>: <span class=\"lx-attr-value\">Structured data, Unstructured data</span>, <span class=\"lx-attr-key\">explanation</span>: <span class=\"lx-attr-value\">The lecture defines data sets and contrasts structured data with unstructured data such as human-generated text, images, and videos.</span>, <span class=\"lx-attr-key\">examples</span>: <span class=\"lx-attr-value\">Structured data: Often in rows and columns, Unstructured data: e.g., text, images, videos</span>}</div>"}, {"index": 1, "class": "lecture_segment", "text": "Explanation: The speaker elaborates on structured data, stating that it has a clear meaning for rows and columns. Unstructured data, on the other hand, is more varied and can be difficult to interpret directly. Examples of unstructured data include text, images, and videos. The lecture notes that with advancements in AI, unstructured data like images and videos can now be converted into a structured format, although understanding how to interpret them remains crucial.\nExamples: Structured data: You know exactly the meaning about the row and column. | Unstructured data: Human-generated content such as image, text, video.", "color": "#D2E3FC", "startPos": 914, "endPos": 1541, "beforeText": "a: e.g., text, images, videos\n\n### Sub-topic: Structured vs. Unstructured Data\nKey Terms: Structured data, Unstructured data, Human-generated content\n", "extractionText": "Explanation: The speaker elaborates on structured data, stating that it has a clear meaning for rows and columns. Unstructured data, on the other hand, is more varied and can be difficult to interpret directly. Examples of unstructured data include text, images, and videos. The lecture notes that with advancements in AI, unstructured data like images and videos can now be converted into a structured format, although understanding how to interpret them remains crucial.\nExamples: Structured data: You know exactly the meaning about the row and column. | Unstructured data: Human-generated content such as image, text, video.", "afterText": "\n\n### Sub-topic: Characteristics of Data Sets\nKey Terms: Dimensionality, Sparsity, Resolution\nExplanation: The lecture introduces three key characteri", "attributesHtml": "<div><strong>class:</strong> lecture_segment</div><div><strong>attributes:</strong> {<span class=\"lx-attr-key\">sub_topic</span>: <span class=\"lx-attr-value\">Structured vs. Unstructured Data</span>, <span class=\"lx-attr-key\">key_terms</span>: <span class=\"lx-attr-value\">Structured data, Unstructured data, Human-generated content</span>, <span class=\"lx-attr-key\">explanation</span>: <span class=\"lx-attr-value\">The lecture explains that structured data has clear row/column meaning, while unstructured data is more varied but can now be transformed into structured form with AI.</span>, <span class=\"lx-attr-key\">examples</span>: <span class=\"lx-attr-value\">Structured data: You know exactly the meaning about the row and column., Unstructured data: Human-generated content such as image, text, video.</span>}</div>"}, {"index": 2, "class": "lecture_segment", "text": "Explanation: The lecture introduces three key characteristics of data sets: Dimensionality (referring to the 'Curse of Dimensionality'), Sparsity (related to 'Only presence counts'), and Resolution (patterns depend on the scale).", "color": "#D2E3FC", "startPos": 1635, "endPos": 1864, "beforeText": "ata: Human-generated content such as image, text, video.\n\n### Sub-topic: Characteristics of Data Sets\nKey Terms: Dimensionality, Sparsity, Resolution\n", "extractionText": "Explanation: The lecture introduces three key characteristics of data sets: Dimensionality (referring to the &#x27;Curse of Dimensionality&#x27;), Sparsity (related to &#x27;Only presence counts&#x27;), and Resolution (patterns depend on the scale).", "afterText": " Sparsity is further explained as originating from the keyword &#x27;sparse,&#x27; meaning that in large datasets, like those from e-commerce stores with millio", "attributesHtml": "<div><strong>class:</strong> lecture_segment</div><div><strong>attributes:</strong> {<span class=\"lx-attr-key\">sub_topic</span>: <span class=\"lx-attr-value\">Characteristics of Data Sets</span>, <span class=\"lx-attr-key\">key_terms</span>: <span class=\"lx-attr-value\">Dimensionality, Sparsity, Resolution</span>, <span class=\"lx-attr-key\">explanation</span>: <span class=\"lx-attr-value\">The lecture introduces three key characteristics of data sets: Dimensionality, Sparsity, and Resolution.</span>, <span class=\"lx-attr-key\">examples</span>: <span class=\"lx-attr-value\"></span>}</div>"}, {"index": 3, "class": "lecture_segment", "text": "Sparsity is further explained as originating from the keyword 'sparse,' meaning that in large datasets, like those from e-commerce stores with millions of records, only a small fraction of the data might be relevant or actively used (e.g., a customer buying only a few books out of millions available). This makes the data sparse.\nExamples: Dimensionality: Curse of Dimensionality | Sparsity: Only presence counts | Resolution: Patterns depend on the scale", "color": "#D2E3FC", "startPos": 1865, "endPos": 2321, "beforeText": "nsionality (referring to the &#x27;Curse of Dimensionality&#x27;), Sparsity (related to &#x27;Only presence counts&#x27;), and Resolution (patterns depend on the scale). ", "extractionText": "Sparsity is further explained as originating from the keyword &#x27;sparse,&#x27; meaning that in large datasets, like those from e-commerce stores with millions of records, only a small fraction of the data might be relevant or actively used (e.g., a customer buying only a few books out of millions available). This makes the data sparse.\nExamples: Dimensionality: Curse of Dimensionality | Sparsity: Only presence counts | Resolution: Patterns depend on the scale", "afterText": "\n\n### Sub-topic: Types of Data Sets\nKey Terms: Data Matrix, Document Data, Transaction Data\nExplanation: The presentation then discusses different typ", "attributesHtml": "<div><strong>class:</strong> lecture_segment</div><div><strong>attributes:</strong> {<span class=\"lx-attr-key\">sub_topic</span>: <span class=\"lx-attr-value\">Sparsity in Data</span>, <span class=\"lx-attr-key\">key_terms</span>: <span class=\"lx-attr-value\">Sparsity, Sparse, Large datasets, E-commerce</span>, <span class=\"lx-attr-key\">explanation</span>: <span class=\"lx-attr-value\">Sparsity in large datasets means only a small fraction of the data is relevant or used, as exemplified by a customer buying few items from millions available.</span>, <span class=\"lx-attr-key\">examples</span>: <span class=\"lx-attr-value\">Dimensionality: Curse of Dimensionality, Sparsity: Only presence counts, Resolution: Patterns depend on the scale</span>}</div>"}, {"index": 4, "class": "lecture_segment", "text": "### Sub-topic: Types of Data Sets\nKey Terms: Data Matrix, Document Data, Transaction Data\nExplanation: The presentation then discusses different types of data sets. A Data Matrix is formed when each object has the same fixed set of numeric attributes, allowing for ratio operations. Document Data typically consists of unstructured and textual information, where each term is a component of a vector, and its value represents the number of times the term appears in the document. This is often converted into a vector form, creating 'term vectors' or 'document vectors.' Transaction Data is another type mentioned.\nExamples: Data Matrix: Example table with 'Book', 'Price', 'Sells', '# Reviews', '# Readers'. | Document Data: Example table showing word counts for 'learn', 'teach', 'score', 'game', 'score', 'teach', 'teach' across 'Document 1', 'Document 2', 'Document 3'.", "color": "#D2E3FC", "startPos": 2323, "endPos": 3196, "beforeText": "makes the data sparse.\nExamples: Dimensionality: Curse of Dimensionality | Sparsity: Only presence counts | Resolution: Patterns depend on the scale\n\n", "extractionText": "### Sub-topic: Types of Data Sets\nKey Terms: Data Matrix, Document Data, Transaction Data\nExplanation: The presentation then discusses different types of data sets. A Data Matrix is formed when each object has the same fixed set of numeric attributes, allowing for ratio operations. Document Data typically consists of unstructured and textual information, where each term is a component of a vector, and its value represents the number of times the term appears in the document. This is often converted into a vector form, creating &#x27;term vectors&#x27; or &#x27;document vectors.&#x27; Transaction Data is another type mentioned.\nExamples: Data Matrix: Example table with &#x27;Book&#x27;, &#x27;Price&#x27;, &#x27;Sells&#x27;, &#x27;# Reviews&#x27;, &#x27;# Readers&#x27;. | Document Data: Example table showing word counts for &#x27;learn&#x27;, &#x27;teach&#x27;, &#x27;score&#x27;, &#x27;game&#x27;, &#x27;score&#x27;, &#x27;teach&#x27;, &#x27;teach&#x27; across &#x27;Document 1&#x27;, &#x27;Document 2&#x27;, &#x27;Document 3&#x27;.", "afterText": "\n\n### Sub-topic: Data Matrix and Document Data\nKey Terms: Data Matrix, Document Data, Vector, Term Vector\nExplanation: The lecture details Data Matric", "attributesHtml": "<div><strong>class:</strong> lecture_segment</div><div><strong>attributes:</strong> {<span class=\"lx-attr-key\">sub_topic</span>: <span class=\"lx-attr-value\">Types of Data Sets</span>, <span class=\"lx-attr-key\">key_terms</span>: <span class=\"lx-attr-value\">Data Matrix, Document Data, Transaction Data, Vector, Term vectors, Document vectors</span>, <span class=\"lx-attr-key\">explanation</span>: <span class=\"lx-attr-value\">The lecture introduces different data set types: Data Matrix (numeric attributes, ratio operations), Document Data (unstructured text, converted to vectors), and Transaction Data.</span>, <span class=\"lx-attr-key\">examples</span>: <span class=\"lx-attr-value\">Data Matrix: Example table with &#x27;Book&#x27;, &#x27;Price&#x27;, &#x27;Sells&#x27;, &#x27;# Reviews&#x27;, &#x27;# Readers&#x27;., Document Data: Example table showing word counts for &#x27;learn&#x27;, &#x27;teach&#x27;, &#x27;score&#x27;, &#x27;game&#x27;, &#x27;score&#x27;, &#x27;teach&#x27;, &#x27;teach&#x27; across &#x27;Document 1&#x27;, &#x27;Document 2&#x27;, &#x27;Document 3&#x27;.</span>}</div>"}, {"index": 5, "class": "lecture_segment", "text": "### Sub-topic: Data Matrix and Document Data\nKey Terms: Data Matrix, Document Data, Vector, Term Vector\nExplanation: The lecture details Data Matrices, emphasizing that all values inside need to become ratio data for operations. Document Data is described as unstructured and textual, where each term is a component of a vector, and its value is the count of that term in the document. This process generates 'term vectors' or 'document vectors,' which are essential for computers to process text data efficiently. The speaker notes that before 2013, this vector conversion was a primary method for handling document data.", "color": "#D2E3FC", "startPos": 3198, "endPos": 3820, "beforeText": " Example table showing word counts for &#x27;learn&#x27;, &#x27;teach&#x27;, &#x27;score&#x27;, &#x27;game&#x27;, &#x27;score&#x27;, &#x27;teach&#x27;, &#x27;teach&#x27; across &#x27;Document 1&#x27;, &#x27;Document 2&#x27;, &#x27;Document 3&#x27;.\n\n", "extractionText": "### Sub-topic: Data Matrix and Document Data\nKey Terms: Data Matrix, Document Data, Vector, Term Vector\nExplanation: The lecture details Data Matrices, emphasizing that all values inside need to become ratio data for operations. Document Data is described as unstructured and textual, where each term is a component of a vector, and its value is the count of that term in the document. This process generates &#x27;term vectors&#x27; or &#x27;document vectors,&#x27; which are essential for computers to process text data efficiently. The speaker notes that before 2013, this vector conversion was a primary method for handling document data.", "afterText": "\nExamples: Data Matrix: If all values inside need to become the ratio data. | Document Data: Each term can be converted as a term vector. The value of", "attributesHtml": "<div><strong>class:</strong> lecture_segment</div><div><strong>attributes:</strong> {<span class=\"lx-attr-key\">sub_topic</span>: <span class=\"lx-attr-value\">Data Matrix and Document Data</span>, <span class=\"lx-attr-key\">key_terms</span>: <span class=\"lx-attr-value\">Data Matrix, Document Data, Vector, Term vector, Ratio data</span>, <span class=\"lx-attr-key\">explanation</span>: <span class=\"lx-attr-value\">Data Matrices require ratio data, while Document Data is unstructured text converted into term or document vectors for efficient computer processing, a common method before 2013.</span>, <span class=\"lx-attr-key\">examples</span>: <span class=\"lx-attr-value\"></span>}</div>"}, {"index": 6, "class": "lecture_segment", "text": "Examples: Data Matrix: If all values inside need to become the ratio data. | Document Data: Each term can be converted as a term vector. The value of each component is the number of times the corresponding term in the document.", "color": "#D2E3FC", "startPos": 3821, "endPos": 4048, "beforeText": "mputers to process text data efficiently. The speaker notes that before 2013, this vector conversion was a primary method for handling document data.\n", "extractionText": "Examples: Data Matrix: If all values inside need to become the ratio data. | Document Data: Each term can be converted as a term vector. The value of each component is the number of times the corresponding term in the document.", "afterText": "\n", "attributesHtml": "<div><strong>class:</strong> lecture_segment</div><div><strong>attributes:</strong> {<span class=\"lx-attr-key\">sub_topic</span>: <span class=\"lx-attr-value\">Data Representation</span>, <span class=\"lx-attr-key\">key_terms</span>: <span class=\"lx-attr-value\">Data Matrix, Document Data, Ratio data, Term vector</span>, <span class=\"lx-attr-key\">explanation</span>: <span class=\"lx-attr-value\">Illustrates how data can be represented, with Data Matrix requiring ratio data and Document Data being convertible to term vectors where component values represent term frequency.</span>, <span class=\"lx-attr-key\">examples</span>: <span class=\"lx-attr-value\">Data Matrix: If all values inside need to become the ratio data., Document Data: Each term can be converted as a term vector. The value of each component is the number of times the corresponding term in the document.</span>}</div>"}];
        let currentIndex = 0;
        let isPlaying = false;
        let animationInterval = null;
        let animationSpeed = 1.0;

        function updateDisplay() {
          const extraction = extractions[currentIndex];
          if (!extraction) return;

          document.getElementById('attributesContainer').innerHTML = extraction.attributesHtml;
          document.getElementById('entityInfo').textContent = (currentIndex + 1) + '/' + extractions.length;
          document.getElementById('posInfo').textContent = '[' + extraction.startPos + '-' + extraction.endPos + ']';
          document.getElementById('progressSlider').value = currentIndex;

          const playBtn = document.querySelector('.lx-control-btn');
          if (playBtn) playBtn.textContent = isPlaying ? '⏸ Pause' : '▶️ Play';

          const prevHighlight = document.querySelector('.lx-text-window .lx-current-highlight');
          if (prevHighlight) prevHighlight.classList.remove('lx-current-highlight');
          const currentSpan = document.querySelector('.lx-text-window span[data-idx="' + currentIndex + '"]');
          if (currentSpan) {
            currentSpan.classList.add('lx-current-highlight');
            currentSpan.scrollIntoView({block: 'center', behavior: 'smooth'});
          }
        }

        function nextExtraction() {
          currentIndex = (currentIndex + 1) % extractions.length;
          updateDisplay();
        }

        function prevExtraction() {
          currentIndex = (currentIndex - 1 + extractions.length) % extractions.length;
          updateDisplay();
        }

        function jumpToExtraction(index) {
          currentIndex = parseInt(index);
          updateDisplay();
        }

        function playPause() {
          if (isPlaying) {
            clearInterval(animationInterval);
            isPlaying = false;
          } else {
            animationInterval = setInterval(nextExtraction, animationSpeed * 1000);
            isPlaying = true;
          }
          updateDisplay();
        }

        window.playPause = playPause;
        window.nextExtraction = nextExtraction;
        window.prevExtraction = prevExtraction;
        window.jumpToExtraction = jumpToExtraction;

        updateDisplay();
      })();
    </script>